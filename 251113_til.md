# TIL - 2025年11月13日

## 今日のメモ
勉強時間：8時間
ヘッダーと、ボトムナビゲーションバーと、ログイン画面を作成すると、アプリが形になった感じがしてテンション爆上がり！

# ユーザー認証基盤の導入と主要画面（レイアウト・ホーム）の実装の続き

## 概要 (Overview)

「てくメモ」の初期開発フェーズとして、アプリケーションの「骨格」となる共通レイアウトと、Webサービスの根幹である「ユーザー認証基盤」を構築しました。

これにより、非認証ユーザーはログイン画面にリダイレクトされ、認証済みユーザーのみがホーム画面（ダッシュボード）にアクセスできる、セキュアなアプリケーションの土台が完成しました。

---

## 実装内容 (Implementation Details)

### 1. 認証基盤 (Authentication)

* **`devise` Gemの導入:**
  * 標準的かつ堅牢な認証機能を実装するため、`devise`を採用しました。
  * `rails g devise User` を実行し、`users`テーブル（マイグレーション）と`User`モデルをセットアップしました。

* **認証制御 (コントローラー):**
  * `home_controller` に `before_action :authenticate_user!` を設定しました。
  * これにより、ログインしていないユーザーがホーム画面（`root`）にアクセスした場合、自動的にログイン画面（`/users/sign_in`）へリダイレクトさせる認証制御を実現しています。

### 2. レイアウト（骨格）の実装 (Layouts)

* **`application.html.erb` の構築:**
  * ヘッダー、フッターナビゲーション、Tailwind CSSの設定など、全ページ共通の「骨格」を定義しました。
  * `<%= yield %>` を適切な位置に配置し、各ビュー（部品）が差し込まれるレイアウト構造を確立しました。
  * `<% content_for :title %>` と `<%= yield(:title) %>` を用い、各ページ（`home#index`や`sessions#new`）から動的に`<title>`タグを書き換えられるようにしています。

### 3. 各種ビュー（部品）の実装 (Views)

* **ヘルパーメソッドの積極的な活用:**
  * 静的なHTML（ハードコーディング）を避け、Railsの作法に沿ったヘルパーメソッド（`link_to`, `image_tag`, `form_for`）を全面的に使用しています。

* **ホーム画面 (`home/index.html.erb`):**
  * Tailwind CSSを駆使し、設計（README）に基づいた歩数計ダッシュボード、天気、ランキング等のUI（静的モックアップ）を実装しました。

* **ログイン画面 (`devise/sessions/new.html.erb`):**
  * 静的な`<form>`タグを`<%= form_for(...) %>`ヘルパーに置き換えました。
  * `<input>`タグを`<%= f.email_field %>`や`<%= f.password_field %>`に置き換えることで、`user[email]`といったDeviseが要求する正しい`name`属性を自動生成させ、認証エンドポイント（`session_path`）に正しくPOSTできるように実装しました。

* **ルーティングとリンクの連携:**
  * `config/routes.rb` にて `root "home#index"` を設定。
  * レイアウトのナビゲーションでは `href="/"` のような静的パスではなく、`<%= link_to root_path, ... %>` を使用し、ルーティングの変更に強い堅牢なリンクを実現しました。

* **アセットパイプラインの活用:**
  * `src="..."` というURL直書きを避け、`<%= image_tag "logo.png", ... %>` を使用しました。
  * これにより、画像は`app/assets/images/`ディレクトリで一元管理され、アセットパイプライン（本番環境でのダイジェスト付与など）の恩恵を受けられるようにしています。

---

## 今後のタスク (Next Steps)

* **認証フローの完成:**
  * `app/views/devise/registrations/new.html.erb`（新規登録画面）に、ログイン画面と同様のデザインを適用し、ユーザーが自身でアカウントを作成できるフローを完成させます。

* **ダッシュボードの動的化:**
  * ホーム画面の静的な値（`5,234歩`など）を、コントローラーから渡されるインスタンス変数（`@step_count`など）に置き換えていきます。

## 気分・状態
今日の気分: 😁 (5: とても気分が良い)
今日のモチベーション: 🌞 (4: やる気がある)
目標の進捗: 🌿 (4: よく進んだ)

---
*Generated by ちいくさ日記*  
*Date: 2025-11-13*  
*Created: 2025-11-13 21:44:37*
