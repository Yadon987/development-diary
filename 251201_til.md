# TIL - 2025年12月01日

## 今日のメモ
勉強時間：10時間

Google CloudのGoogle OAuth審査について、Google Fit使用時は審査必須で1-2週間かかることを今更知って愕然とする。

# 🚶‍♂️ てくメモ (TekuMemo) - 開発レポート
## 📌 アプリ概要
**「毎日の散歩を、もっと楽しく記録する。」**
働き盛り世代の運動習慣化をサポートする、コミュニティ型お散歩記録アプリです。
単なる記録ツールではなく、「継続」にフォーカスし、天気予報やランキング、リアクション機能を通じてモチベーション維持を支援します。
## 🛠️ 技術スタック
モダンなRails開発のベストプラクティスを採用し、SPAライクな操作性と開発効率を両立させました。
| カテゴリ | 技術要素 | 選定理由 |
| :--- | :--- | :--- |
| **Backend** | Ruby on Rails 7.1 | 堅牢性と開発スピードを重視。 |
| **Frontend** | Hotwire (Turbo/Stimulus) | 複雑なJSフレームワークを使わずにSPA風の高速な画面遷移を実現。 |
| **Styling** | Tailwind CSS | ユーティリティファーストによる迅速なUI構築と、一貫性のあるデザイン管理。 |
| **Database** | PostgreSQL | 本番環境（Render）との親和性と信頼性。 |
| **Auth** | Devise + Google OAuth2 | セキュリティとUX（ワンクリック登録）の両立。 |
| **API** | Google Fit API | 歩数・距離データの自動取得によるユーザー負担の軽減。 |
| **Infra** | Render | デプロイの容易さとコストパフォーマンス。 |
## 💡 こだわりの実装ポイント
### 1. Google Fit連携によるUX向上
ユーザーにとって最大の障壁である「手入力の手間」を省くため、Google Fit APIを導入しました。
*   **課題:** GoogleのOAuthアプリ審査に時間がかかり、その間ユーザーに警告画面が表示されてしまう。
*   **解決策:** 審査完了までの暫定対応として、ログイン画面や連携画面に「警告画面の突破方法」を図解したアコーディオンUIを実装。ユーザーの不安を取り除き、離脱を防ぐ工夫を凝らしました。
### 2. Hotwireを活用した快適な操作性
ReactやVueを使わずに、Rails標準のHotwire (Turbo Drive / Turbo Frames) をフル活用しました。
*   ページ遷移を感じさせない高速なレスポンス。
*   「いいね」や「応援」などのリアクション機能を非同期で実装し、アプリのようなサクサク感を実現。
### 3. iOS Chrome特有のバグ対応
モバイルブラウザでの実機検証を徹底し、iOS Chromeでのスクロール時にボトムナビゲーションが振動する問題を特定。
*   **対応:** Stimulusコントローラーを調整し、特定のブラウザ環境下ではスクロール連動隠蔽機能を無効化（常時表示）する条件分岐を実装。プラットフォームごとの微細な挙動の違いにも対応しました。
### 4. 継続率を高めるUIデザイン
「使っていて楽しい」と感じさせるため、視覚的なフィードバックを重視しました。
*   **天気カード:** Windy.comのAPIを活用し、現在地周辺の天気予報をリッチなカード形式で表示。
*   **スタンプラリー:** ログイン状況をカレンダー形式で可視化し、継続の達成感を演出。
*   **ダークモード:** 早朝や夜間の散歩でも目に優しいダークモードを完全サポート。
## 🐛 苦労した点と乗り越えた経験
*   **Google認証の環境差異:** 本番環境（Render）でのみ発生する認証エラー（InvalidAuthenticityToken）に直面。SSL設定（`config.force_ssl = true`）やセッションストアの設定を見直し、ログを詳細に解析することで解決しました。
*   **レスポンシブ対応:** PCとスマホで最適化されたレイアウトを実現するため、Tailwind CSSのブレークポイントを細かく調整。特にアコーディオンUIなどは、スマホの狭い画面でも崩れないよう微調整を重ねました。
## 🚀 今後の展望
*   **Google審査の完了:** 現在プレビュー版のGoogle Fit連携を正式リリースへ。
*   **フォロー機能の強化:** ユーザー間の繋がりを深め、コミュニティとしての価値を高める。
*   **PWA化:** ネイティブアプリに近い体験を提供し、プッシュ通知などを実装予定。
---

## スクリーンショット
| 変更箇所 | スクリーンショット |
| --- | --- |
| ログイン画面（ガイド） | <img width="558" height="1174" alt="image" src="https://github.com/user-attachments/assets/8dec7715-4553-48dd-aae1-9cef41d9240a" /> |
| プライバシーポリシー（英語） | <img width="1076" height="1319" alt="image" src="https://github.com/user-attachments/assets/fcec4f76-680e-4243-9311-90457e0c1248" /> |
| Google連携解除モーダル | <img width="888" height="1312" alt="image" src="https://github.com/user-attachments/assets/18ec3911-f13d-4a9e-9485-4f385c831f3d" /> |
| パスワードリセット画面(Coming Soon) | <img width="874" height="1171" alt="image" src="https://github.com/user-attachments/assets/eebc6606-eb9b-4154-ada3-3e79ef40c332" /> |

## 気分・状態
今日の気分: 😁 (5: とても気分が良い)
今日のモチベーション: 🌈 (5: とてもやる気がある)
目標の進捗: 🌳 (5: とてもよく進んだ)

---
*Generated by ちいくさ日記*  
*Date: 2025-12-01*  
*Created: 2025-12-02 21:02:26*
