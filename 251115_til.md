# TIL - 2025年11月15日

## 今日のメモ
勉強時間：9時間

どうしてもダークモードのバグが倒せない…

## 概要 📝
`03_issue_user-authentication` ブランチの実装作業、およびその過程で発生した2件の環境・設定エラーを修正しました。

---

## 1. アセットパイプラインの競合エラー修正 (Sprockets vs Importmap) 🚀

### 発生した問題
`Sprockets::Rails::Helper::AssetNotPrecompiledError` が発生。
`application.js` がプリコンパイル対象として宣言されていない、という内容でした。

### 原因と対応
- エラーメッセージの指示（`manifest.js` への追記）は、Sprockets（古い方法）の解決策でした。
- しかし、コード上ではRails 7標準のImportmap (`<%= javascript_importmap_tags %>`) を使用していました。
- `application.html.erb` を確認したところ、Importmapのタグと、Sprockets用の古いタグ (`<%= javascript_include_tag "application" ... %>`) が混在していることが根本原因でした。
- **Sprockets用の `javascript_include_tag` を削除**し、Importmap方式に統一することでエラーを解決しました。

---

## 2. Git Push時のファイルサイズ制限エラー (GH001) 📂

### 発生した問題
`git push` 時に、GitHubのファイルサイズ制限（100.00 MB）に抵触するエラーが発生。

### 原因と対応
- `vendor/bundle` ディレクトリがGitの追跡対象に含まれており、その中の `tailwindcss` 実行ファイル (116.77 MB) が原因でした。
- `vendor/bundle` は、`bundle install` コマンドで環境ごとに生成されるべきもので、Gitの管理対象に含めるべきではありませんでした。
- 以下の手順で、Gitの追跡対象から `vendor/bundle` を恒久的に除外しました。

1.  `.gitignore` に `/vendor/bundle` を追記。
2.  （`.gitignore` 追記だけでは、一度追跡されたファイルの履歴は消えないため）`git rm -r --cached vendor/bundle` を実行し、ローカルファイルは残したまま、Gitのインデックス（追跡対象）からのみ削除。
3.  上記2点の変更（`.gitignore` の更新と `rm --cached` の実行）をコミット。

これにより、巨大ファイルがGitの履歴から除外され、リモートリポジトリへpush可能になりました。

---
*Generated by ちいくさ日記*  
*Date: 2025-11-15*  
*Created: 2025-11-15 23:56:01*
