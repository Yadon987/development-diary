# TIL - 2025年12月02日

## 今日のメモ
勉強時間：1１時間

なんとか開発中のアプリをMVPまでは持って行って、忘年会の会話デッキにしたい…


# 🏃‍♂️ 散歩記録・健康管理アプリ「てくメモ」開発レポート
## 💡 アプリケーション概要
日々の散歩を楽しく記録し、健康管理をサポートするWebアプリケーション。
Google Fit連携による歩数・カロリーの自動取得や、天気予報表示、ログインスタンプ機能により、ユーザーの継続的な運動習慣を動機づけます。
## 🛠 技術スタック
*   **Backend:** Ruby 3.2 / Ruby on Rails 7.0
*   **Frontend:** Hotwire (Turbo / Stimulus), Tailwind CSS
*   **Database:** PostgreSQL
*   **Infrastructure:** Render (Production)
*   **Testing:** RSpec (System Spec / Model Spec), FactoryBot, Capybara
*   **Authentication:** Devise, OmniAuth (Google OAuth2)
*   **External API:** Google Fit API, OpenWeatherMap API
## ✨ こだわった技術ポイント・工夫
### 1. 認証基盤の堅牢化と標準化（Devise完全統合）
当初は独自のコントローラーで実装していたユーザー管理機能を、Railsのデファクトスタンダードである **Devise** に完全統合しました。
*   **目的:** セキュリティリスクの低減と、将来的な保守性・拡張性の向上。
*   **工夫:** 単なる置き換えではなく、Deviseのコントローラーを継承してカスタマイズし、アプリ固有の要件（Google連携解除やプロフィール編集）を標準機能の中に綺麗に組み込みました。
### 2. 仕様の見直しによる複雑性の排除
Google認証機能において、「新規登録時の自動連携」がパスワード管理やバリデーションロジックを複雑にしていることに気づき、仕様を抜本的に見直しました。
*   **Before:** Googleアカウントでの新規登録を許可（パスワード未設定ユーザーが発生し、条件分岐が複雑化）。
*   **After:** 新規登録はメールアドレスのみに統一し、Google連携は「ログイン後のオプション機能」として再定義。
*   **成果:** コードの複雑性が大幅に減少し、バグの温床を排除。ユーザーフローもシンプルになり、セキュリティ強度も向上しました。
### 3. テスト駆動による品質担保（RSpec）
「動けばいい」ではなく「壊れない」コードを目指し、System Specを中心にテストを網羅しました。
*   **異常系の網羅:** 正常系（Happy Path）だけでなく、入力ミスや不正なパラメータに対するバリデーションエラー、未ログイン時のリダイレクトなど、**異常系・境界値のテスト**を徹底しました。
*   **バグの早期発見:** テスト作成過程で「ユーザー名が空でも登録できてしまう」というモデルの不備を発見し、即座に修正しました。テストを書くことの重要性を再認識しました。
### 4. モダンでアクセシブルなUI/UX
*   **Hotwire:** SPAのような快適な画面遷移を、複雑なJSフレームワークを使わずにRails標準技術で実現。
*   **Tailwind CSS:** レスポンシブ対応はもちろん、ダークモードにも完全対応。
*   **アクセシビリティ:** フォームのラベル紐付け（[for](cci:1://file:///home/nukon999/workspace/tekumemo/app/controllers/users/registrations_controller.rb:43:2-46:5)属性）など、細かいユーザビリティにも配慮して実装しました。
## 🚀 今後の展望
*   **CI/CDパイプラインの構築:** GitHub Actionsを用いたテスト自動実行とデプロイの自動化。
*   **機能拡張:** 散歩ルートのマップ表示や、ユーザー同士の緩やかな交流機能の実装。

## 気分・状態
今日の気分: 😁 (5: とても気分が良い)
今日のモチベーション: 🌈 (5: とてもやる気がある)
目標の進捗: 🌳 (5: とてもよく進んだ)

---
*Generated by ちいくさ日記*  
*Date: 2025-12-02*  
*Created: 2025-12-02 05:11:40*
