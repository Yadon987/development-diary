# TIL - 2026年01月26日

## 今日のメモ
勉強時間：12時間

ActiveRecord演習いきなりすぎてぜんぜんわからん笑
応用STEP　進捗率59％

# 📅 開発日誌 (2026-01-27)
## 📸 Screen Shots
<!-- 各プロジェクトの実行画面やSQLの発行ログ、ER図などをここに貼ってください -->
<br>
<br>
---
## 📝 Summary
本日は2つのプロジェクトを並行して進め、**Rubyの基礎体力（アルゴリズム・設計）** と **Webアプリケーションのデータ層（Active Record/SQL）** の双方を強化しました。
1. **Ruby Advanced**: 言語仕様の理解を深めるためのアルゴリズム実装と、変更に強いオブジェクト指向設計。
2. **Active Record Practice**: 実務を想定した複雑なリレーションを持つデータベースからの効率的なデータ抽出。
「動くコード」を書くことは大前提として、「保守性」「メモリ効率」「クエリパフォーマンス」を意識した実装を行いました。
## 🚀 Activity Log
### Project 1: Ruby Algorithms & OO Design
**【リポジトリ: 94635_Yadon987_ruby_advanced】**
Rubyの言語特性を活かしたコーディングと、堅牢なクラス設計に取り組みました。
- **アルゴリズム実装 (`ruby_algorithm/`)**
  - **論理的思考の強化**: FizzBuzzの応用問題や文字列操作アルゴリズムを実装。
  - **低レイヤーの理解**: 便利なメソッド（`reverse`等）に頼らず、あえて `while` ループでポインタ操作を行うことで、処理の裏側にあるロジックを再確認。
- **オブジェクト指向設計 (`object_oriented/`)**
  - **自動販売機プログラム**: 単一責任の原則 (SRP) に従い、`VendingMachine` クラスと `Drink` クラスに責務を分割。拡張性のある設計を実践。
  - **テスト環境整備**: Docker + Minitest によるテスト自動化フローの構築。
### Project 2: Advanced SQL with Active Record
**【リポジトリ: runteq_curriculum_advanced】**
ECサイトやレンタルビデオ店のような、多対多のリレーションが絡み合う複雑なスキーマに対するデータ抽出を行いました。
- **複雑な結合処理 (`joins` / Nested Associations)**
  - `Film` -> `Inventory` -> `Rental` -> `Payment` という4階層にわたるテーブル結合を、Active Recordのメソッドチェーンで実装。
  - **N+1問題の回避**: 関連データを個別にロードするのではなく、1回のクエリで結合して取得する設計を徹底。
- **集計処理の最適化 (`group` / `sum`)**
  - 「映画ごとの売上合計」などの計算ロジックにおいて、Ruby側で計算させる（メモリ負荷大）のではなく、データベース層で集計を行うアプローチを採用。
  - `select` 句を活用し、必要なカラムのみをインスタンスにマッピングすることで、オブジェクト生成のコストを削減。
---
## 💡 Tech Note / Learnings
### 【SQL】アプリ側での計算 vs DB側での計算
データの集計処理において、Active Recordの利便性に甘えて `all.each` で回すとパフォーマンスが劣化します。発行されるSQLを意識し、DBのパワーを活かす実装を行いました。
```ruby
# ❌ Bad Pattern: N+1が発生し、メモリも圧迫する
Film.all.each do |film|
  # 関連を辿るたびにSQLが発行される
  puts film.payments.sum(:amount)
end
# ✅ Good Pattern: 1回のSQLで完結させる
# 発行SQL: SELECT films.title, SUM(payments.amount) ... GROUP BY films.id
Film.joins(inventory: { rental: :payment })
    .group("films.film_id")
    .select("films.title, SUM(payments.amount) as revenue")
【Ruby】イディオムとアルゴリズムの両立
便利メソッドを使えば1行で書ける処理を、あえて基本構文で書くことで「アルゴリズムの計算量」を意識しました。

ruby
# 文字列操作の基礎実装（O(n)の理解）
def reverse_string(str)
  result = ""
  i = str.length - 1
  while i >= 0
    result << str[i] # 文字列連結のコスト意識
    i -= 1
  end
  result
end

## 気分・状態
今日の気分: 😁 (5: とても気分が良い)
今日のモチベーション: 🌈 (5: とてもやる気がある)
目標の進捗: 🌳 (5: とてもよく進んだ)

---
*Generated by ちいくさ日記*  
*Date: 2026-01-26*  
*Created: 2026-01-27 20:39:08*
