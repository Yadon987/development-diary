# TIL - 2026年01月29日

## 今日のメモ
勉強時間：12時間

カリキュラム完了ならず　オブジェクト指向をちょっと丁寧にやったのと、インフラの最後で意外と時間食いましたね :sob: 　AI自動コードレビューはよ使いたい
応用STEP　進捗率98％

# 📅 開発日誌 (2026年1月29日)

## 🚀 本日のハイライト
本日は、**「インフラ設計の策定」**と**「オブジェクト指向設計の実践」**という、エンジニアリングの根幹に関わる2つの領域で重要な進捗がありました。
静的な設計フェーズ（AWS）と動的な実装フェーズ（Rubyリファクタリング）の両面から、堅牢で保守性の高いシステム構築に取り組みました。

---

### 📸 スクリーンショット
![https://res.cloudinary.com/dd4pdy5p7/image/upload/v1769717873/wkj3zzomjhzdrturlhfu.gif](https://res.cloudinary.com/dd4pdy5p7/image/upload/v1769717873/wkj3zzomjhzdrturlhfu.gif)

---

## 1. ☁️ AWSインフラ構築カリキュラム（設計フェーズ）

### 📝 実施概要
EC2インスタンスを用いたWebアプリケーションの本番デプロイに向け、**「なぜその構成が必要か」**に焦点を当てたアーキテクチャ設計を行いました。手順の形骸化を防ぎ、トラブルシューティング能力を高めるための準備段階です。

### 🔧 技術的決定事項
- **依存関係の完全分離**: ローカル環境との差異を排除するため、`rbenv` によるRubyバージョン管理と `Yarn` によるJSランタイムの導入を計画に盛り込みました。
- **セキュリティ設計**: GitHub認証におけるHTTPS除外（SSH公開鍵利用）や、環境変数（`master.key`）の注入フローを明文化し、セキュアなデプロイパイプラインを策定しました。
- **Web/Appサーバー構成**: Nginx（リバースプロキシ）とPuma（Appサーバー）の役割分担を定義し、Unixドメインソケット連携による高速なリクエスト処理フローを設計しました。

---

## 2. 💎 Rubyオブジェクト指向設計の実践（実装フェーズ）

### 📝 実施概要
自動販売機プログラムのリファクタリングを通じて、オブジェクト指向の原則を実際のコードに適用しました。
**「インスタンス変数は2つまで」「else句を使用しない」**という制約を遵守することで、凝集度を高め結合度を下げる設計スキルを磨きました。

### 💻 コミット履歴 (Git Log)
設計原則に基づき、段階的にコードベースを改善しました。

```text
dd9bc3b - 12:26 : feat: パッケージ構造の整理と硬貨バリデーション追加
7407e5a - 11:06 : feat: else句を使用しない責務の委譲とPaymentクラスの導入
406d488 - 07:47 : fix: minitest仕様準拠のため返り値をChangeオブジェクトに変更
3b992bc - 07:35 : feat: インスタンス変数を2つに制限しクラス分割を実施
2c53ec5 - 05:34 : style: RuboCopによるコード修正とフォーマットの統一
15f76d4 - 05:30 : refactor: オブジェクト指向エクササイズの実践
```

### 🔧 設計の改善ポイント

#### ① 責務の分散とカプセル化
巨大化していた `VendingMachine` クラスから、以下の責務を専用クラスへ切り出しました。
- **Storage**: 在庫管理ロジックの閉じた世界
- **CoinMech**: 硬貨投入と釣り銭計算のスペシャリスト
- **Payment**: 決済トランザクションの抽象化

#### ② ガード節による可読性向上
「else句禁止」の制約を逆手に取り、早期リターン（ガード節）を徹底。ネストの深い条件分岐を排除し、仕様変更に強いフラットなコード構造を実現しました。

#### ③ ドメイン駆動のディレクトリ構成
機能単位ではなく、ドメイン（関心事）単位でパッケージを再編しました。
```text
├── drink/  (商品関連)
├── money/  (金銭・決済関連)
└── stock/  (在庫管理関連)
```
これにより、ディレクトリ構成を見るだけでシステムのモデリング俯瞰できるようになりました。

---

### 💡 明日のアクションプラン
- **AWS**: 策定した計画に基づき、実際のEC2インスタンスセットアップコマンドを実行・検証します。
- **Ruby**: 新設したパッケージ間の結合度を監視しつつ、さらなる機能追加（売上管理機能など）において今回の設計パターンを適用します。

## 気分・状態
今日の気分: 😁 (5: とても気分が良い)
今日のモチベーション: 🌈 (5: とてもやる気がある)
目標の進捗: 🌳 (5: とてもよく進んだ)

---
*Generated by ちいくさ日記*  
*Date: 2026-01-29*  
*Created: 2026-01-30 05:43:07*
