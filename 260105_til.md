# TIL - 2026年01月05日

## 今日のメモ
勉強時間：11時間

Junさんのちゃぶちゃぶ会が学びも多くて、参加して良かった
ああいうヒアリング力って本当に大切だなと痛感

# 🛠️ 開発日誌: UI/UXの刷新と堅牢性の強化 - ユーザー体験と品質の両立を目指して
**日付:** 2026/01/05
**プロジェクト:** TekuMemo (てくメモ)
**担当:** UI/UX改善 / セキュリティ対策 / テスト保守

---
## 🚀 本日の成果・概要
本日は、ユーザーの没入感を高めるための**UI/UXの大規模な刷新**と、アプリケーションの信頼性を支える**セキュリティ・テストの強化**を行いました。単に見栄えを良くするだけでなく、デザインシステムに基づいた実装と、変更に伴うテストの自動化・修正までを一気通貫で行い、プロダクトの品質を底上げしました。
## 💡 技術的な取り組み詳細
### 1. 没入感を高める "Deep Space" テーマの実装 (Front-end)
ダークモードの背景デザインを、従来の「サイバーグリッド（方眼紙風）」から、宇宙空間をイメージした「Deep Space」テーマへ刷新しました。
*   **課題:** 以前のグリッド線は視覚的なノイズとなり、コンテンツ（カードUI）への集中を阻害していた。
*   **解決策:**
    *   **CSSアニメーションの高度化:** `@keyframes` を駆使し、画面下部から粒子（Stardust）がランダムに昇り、消失するアニメーションを実装。
    *   **深度の表現:** 透過度（Opacity）とスケールを動的に変化させることで、ブラウザ上で擬似的な3D空間（奥行き）を表現。右側の粒子が表示されないバグも、CSSプロパティ（`position`計算）の見直しで解消。
    *   **デザインシステムの更新:** 実装だけでなく [.docs/DESIGN_SYSTEM_DARK.md](cci:7://file://wsl.localhost/Ubuntu-24.04/home/nukon/ws/tekumemo/.docs/DESIGN_SYSTEM_DARK.md:0:0-0:0) ドキュメントを更新し、デザイン意図とアニメーション仕様を言語化・標準化。
### 2. セキュリティと堅牢性の強化 (Security & Quality)
静的解析ツール `Brakeman` を導入し、潜在的な脆弱性を徹底的に排除しました。
*   **対応内容:**
    *   **Mass Assignment対策:** `permit` されていないパラメータの入力を防ぐため、Strong Parametersの定義を厳格化。
    *   **XSS / Open Redirect対策:** 外部入力値のサニタイズ処理と、リダイレクト先のホワイトリスト検証を追加。
    *   **SQLインジェクション対策:** 生のSQLクエリを避け、Active Recordのプレースホルダを利用したクエリビルダへ書き換え。
### 3. テスト駆動での品質担保 (Testing / RSpec)
UI変更が機能に影響を与えていないか、回帰テスト（Regression Testing）を通して確認・修正しました。
*   **System Specの追随:**
    *   ログイン画面のボタン文言変更（「ゲストログイン」→「ゲストで試してみる」）に合わせ、Capybaraによるテストシナリオ即座に修正。
*   **タイムゾーン問題の解決:**
    *   ランキング集計テストにおいて、CI環境（UTC）とアプリ要件（JST）のズレによりテストが失敗していた問題を特定。`Date.today` を `Time.zone.today` に置き換え、ローカル/CI問わず安定して動作するテストコードへリファクタリング。
---
## 🔥 工夫したポイント・学び
*   **「動く仕様書」としてのデザインシステム:**
    感覚的な修正で終わらせず、ドキュメントを並行して更新することで、チーム開発における「共通言語」としてデザインシステムを機能させました。
*   **ユーザー体験(UX)へのこだわり:**
    ヘッダーアイコンの余白（`gap`）調整や、ダークモードの色の深みなど、ピクセル単位・色単位での微調整を繰り返し、ユーザーが「使っていて気持ちいい」と感じる挙動を追求しました。
*   **変更に強いコードベース:**
    UI変更時にテストが正しく失敗（Red）し、それを修正（Green）するプロセスを経ることで、変更に対する恐怖心をなくし、自信を持ってリリースできる状態を維持しました。
## 🛠️ 使用技術スタック
*   **Language:** Ruby 3.x, JavaScript
*   **Framework:** Ruby on Rails 7, Tailwind CSS
*   **Testing:** RSpec, Capybara, System Specs
*   **Tools:** Docker, WSL2, Git/GitHub, Brakeman

## 気分・状態
今日の気分: 😁 (5: とても気分が良い)
今日のモチベーション: 🌈 (5: とてもやる気がある)
目標の進捗: 🌳 (5: とてもよく進んだ)

---
*Generated by ちいくさ日記*  
*Date: 2026-01-05*  
*Created: 2026-01-05 05:38:24*
